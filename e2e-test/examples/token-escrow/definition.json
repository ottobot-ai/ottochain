{
  "states": {
    "pending": {
      "id": { "value": "pending" },
      "isFinal": false,
      "metadata": null
    },
    "funded": {
      "id": { "value": "funded" },
      "isFinal": false,
      "metadata": null
    },
    "released": {
      "id": { "value": "released" },
      "isFinal": true,
      "metadata": null
    },
    "refunded": {
      "id": { "value": "refunded" },
      "isFinal": true,
      "metadata": null
    }
  },
  "initialState": { "value": "pending" },
  "transitions": [
    {
      "from": { "value": "pending" },
      "to": { "value": "funded" },
      "eventName": "fund",
      "guard": { "==": [1, 1] },
      "effect": { "merge": [{ "var": "state" }, { "depositor": { "var": "event.depositor" }, "amount": { "var": "event.amount" } }] },
      "dependencies": []
    },
    {
      "from": { "value": "funded" },
      "to": { "value": "released" },
      "eventName": "release",
      "guard": { "==": [1, 1] },
      "effect": { "merge": [{ "var": "state" }, { "beneficiary": { "var": "event.beneficiary" } }] },
      "dependencies": []
    },
    {
      "from": { "value": "funded" },
      "to": { "value": "refunded" },
      "eventName": "refund",
      "guard": { "==": [1, 1] },
      "effect": { "merge": [{ "var": "state" }, {}] },
      "dependencies": []
    }
  ],
  "metadata": {
    "name": "TokenEscrow",
    "description": "A simple token escrow state machine"
  }
}
