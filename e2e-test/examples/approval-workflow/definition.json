{
  "states": {
    "draft": {
      "id": { "value": "draft" },
      "isFinal": false,
      "metadata": null
    },
    "submitted": {
      "id": { "value": "submitted" },
      "isFinal": false,
      "metadata": null
    },
    "approved": {
      "id": { "value": "approved" },
      "isFinal": true,
      "metadata": null
    },
    "rejected": {
      "id": { "value": "rejected" },
      "isFinal": true,
      "metadata": null
    }
  },
  "initialState": { "value": "draft" },
  "transitions": [
    {
      "from": { "value": "draft" },
      "to": { "value": "submitted" },
      "eventType": { "value": "submit" },
      "guard": { "==": [1, 1] },
      "effect": { "merge": [{ "var": "state" }, { "submittedAt": { "var": "event.timestamp" } }] },
      "dependencies": []
    },
    {
      "from": { "value": "submitted" },
      "to": { "value": "approved" },
      "eventType": { "value": "approve" },
      "guard": { "==": [1, 1] },
      "effect": { "merge": [{ "var": "state" }, { "approvedBy": { "var": "event.approver" } }] },
      "dependencies": []
    },
    {
      "from": { "value": "submitted" },
      "to": { "value": "rejected" },
      "eventType": { "value": "reject" },
      "guard": { "==": [1, 1] },
      "effect": { "merge": [{ "var": "state" }, { "rejectedBy": { "var": "event.approver" }, "reason": { "var": "event.reason" } }] },
      "dependencies": []
    }
  ],
  "metadata": {
    "name": "ApprovalWorkflow",
    "description": "A simple approval workflow state machine"
  }
}