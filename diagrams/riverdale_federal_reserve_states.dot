digraph RiverdaleFederalReserve {
  rankdir=LR;
  node [shape=box, style="rounded,filled", fillcolor=lightblue, fontname="Arial"];
  edge [fontname="Arial", fontsize=10];

  // Initial state
  node [fillcolor=lightgreen];
  stable;

  // Regular states
  node [fillcolor=lightblue];
  rate_review;
  rate_increased;
  rate_decreased;
  stress_testing;

  // Emergency state
  node [fillcolor=lightcoral];
  emergency_lending;

  // Rate policy cycle
  stable -> rate_review [label="quarterly_meeting"];
  rate_review -> stable [label="set_rate\n[inflation > 2.5%]\nTRIGGER: all_banks"];

  // Regulatory oversight
  stable -> stress_testing [label="initiate_stress_test\n[high volatility/risk]\nTRIGGER: all_banks"];

  // Crisis response
  stable -> emergency_lending [label="emergency_lending_request\n(from bank)\nTRIGGER: bank\nOUTPUT: regulatory_notice"];

  // System-wide impact annotation
  note [shape=note, fillcolor=lightyellow, label="System-Wide Authority:\n\n1. Rate Policy:\n   - Broadcasts to ALL banks\n   - Affects lending rates\n   - Economic stabilization\n\n2. Stress Testing:\n   - Triggers ALL banks\n   - Validates capital ratios\n   - Systemic risk assessment\n\n3. Emergency Lending:\n   - Bailout mechanism\n   - Liquidity injection\n   - Crisis intervention"];

  // Metrics note
  metrics [shape=note, fillcolor=lightcyan, label="Economic Indicators:\n- Inflation rate\n- Unemployment rate\n- GDP growth\n- Market volatility\n- Systemic risk\n\nCapital Requirements:\n- Base rate + risk premium\n- Emergency rate: base + 1%"];

  // Legend
  {
    rank=sink;
    legend [shape=box, style=filled, fillcolor=white, label="Legend:\nBroadcast triggers affect\nALL connected banks\nsimultaneously"];
  }
}